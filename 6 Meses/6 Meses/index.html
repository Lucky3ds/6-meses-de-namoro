<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Jogo do Amor ðŸ’–</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(#87CEEB, #fff);
  }
  canvas {
    display: block;
    background: #7ec850;
  }
  #message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.95);
    color: #d63384;
    font-family: "Comic Sans MS", cursive;
    font-size: 1.2rem;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    display: none;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
    width: 80%;
    max-width: 400px;
  }
</style>
</head>
<body>
<canvas id="game"></canvas>
<div id="message">
  Feliz 6 meses de namoro, passamos nossas dificuldades, mas passaria tudo isso de novo com vocÃª! ðŸ’•<br>
  Te amo atÃ© o infinito e alÃ©m.
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// CONTROLES
let jumpRequested = false;
window.addEventListener("keydown", e => {
  if (e.key === " " || e.key === "Spacebar") jumpRequested = true;
});
window.addEventListener("touchstart", () => jumpRequested = true);

// CENÃRIO
const groundY = canvas.height - 80;
let platforms = [
  {x: 0, y: groundY, w: 400, h: 80},
  {x: 450, y: groundY, w: 300, h: 80},
  {x: 850, y: groundY, w: 200, h: 80},
  {x: 1150, y: groundY, w: 400, h: 80},
  {x: 1600, y: groundY, w: 400, h: 80},
];
let cameraX = 0;

// CORAÃ‡ÃƒO
let heart = { x: 1850, y: groundY - 60, size: 32, collected: false };

// PERSONAGEM
const player = {
  x: 50, y: groundY - 60, w: 32, h: 52,
  velY: 0, speed: 4, jumpForce: 10,
  grounded: false,
  frame: 0,
  frameTick: 0,
  facingRight: true,
  onGround: true,

  draw() {
    const {x, y, w, h} = this;
    ctx.save();

    // Corpo base
    ctx.fillStyle = "#b07b50"; // pele
    ctx.fillRect(x + 10, y + 10, 12, 22);

    // Rosto detalhado
    ctx.fillRect(x + 8, y, 16, 12); // rosto
    ctx.fillStyle = "#222";
    ctx.fillRect(x + 12, y + 4, 2, 2); // olho esquerdo
    ctx.fillRect(x + 18, y + 4, 2, 2); // olho direito
    ctx.fillStyle = "#d16b50";
    ctx.fillRect(x + 12, y + 8, 6, 2); // boca

    // Cabelo estilizado
    ctx.fillStyle = "#111";
    let hairOffset = (Math.abs(this.speed) > 0.5 && this.onGround) ? Math.sin(this.frameTick / 3) * 2 : 0;
    ctx.fillRect(x + 4, y - 2 + hairOffset, 24, 10);
    ctx.fillRect(x + 4, y + 4 + hairOffset, 4, 12);
    ctx.fillRect(x + 20, y + 4 + hairOffset, 4, 12);

    // Roupa com detalhes
    ctx.fillStyle = "#e75480";
    ctx.fillRect(x + 10, y + 22, 12, 14);
    ctx.fillStyle = "#c2185b"; // sombra
    ctx.fillRect(x + 10, y + 26, 12, 10);

    // Cinto
    ctx.fillStyle = "#222";
    ctx.fillRect(x + 10, y + 36, 12, 2);

    // Pernas animadas
    ctx.fillStyle = "#222";
    if (this.onGround) {
      this.frameTick++;
      if (this.frameTick > 5) {
        this.frame = (this.frame + 1) % 2;
        this.frameTick = 0;
      }
    } else {
      this.frame = 0;
      this.frameTick = 0;
    }
    if (this.frame === 0) {
      ctx.fillRect(x + 10, y + 38, 5, 12);
      ctx.fillRect(x + 17, y + 38, 5, 12);
    } else {
      ctx.fillRect(x + 8, y + 38, 5, 12);
      ctx.fillRect(x + 19, y + 38, 5, 12);
    }

    // BraÃ§os
    ctx.fillStyle = "#b07b50";
    ctx.fillRect(x + 4, y + 18, 4, 10);
    ctx.fillRect(x + 24, y + 18, 4, 10);

    ctx.restore();
  },

  update() {
    // anda sempre para a direita
    this.x += this.speed;

    // pulo
    if (jumpRequested && this.grounded) this.jump();
    jumpRequested = false;

    this.y += this.velY;
    this.velY += 0.6; // gravidade
    this.grounded = false;

    this.onGround = false;
    for (let p of platforms) {
      if (this.x + this.w > p.x && this.x < p.x + p.w &&
          this.y + this.h > p.y && this.y + this.h < p.y + p.h) {
        this.y = p.y - this.h;
        this.velY = 0;
        this.grounded = true;
        this.onGround = true;
      }
    }

    // cair fora do cenÃ¡rio
    if (this.y > canvas.height) {
      this.x = 50;
      this.y = groundY - 60;
      cameraX = 0;
    }

    cameraX = this.x - canvas.width / 2 + this.w / 2;

    // colisÃ£o com coraÃ§Ã£o
    if (!heart.collected &&
        this.x + this.w > heart.x && this.x < heart.x + heart.size &&
        this.y + this.h > heart.y && this.y < heart.y + heart.size) {
      heart.collected = true;
      document.getElementById("message").style.display = "block";
    }
  },

  jump() {
    if (this.grounded) {
      this.velY = -this.jumpForce;
      this.grounded = false;
    }
  }
};

// LOOP
function loop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.save();
  ctx.translate(-cameraX, 0);

  // plataformas
  for (let p of platforms) {
    ctx.fillStyle = "#3b6b24";
    ctx.fillRect(p.x, p.y, p.w, p.h);
    ctx.fillStyle = "#2f541d";
    ctx.fillRect(p.x, p.y + 60, p.w, 20);
  }

  // coraÃ§Ã£o
  if (!heart.collected) {
    const x = heart.x + heart.size / 2;
    const y = heart.y + heart.size / 2;
    ctx.beginPath();
    ctx.fillStyle = "red";
    ctx.moveTo(x, y + 5);
    ctx.bezierCurveTo(x - 15, y - 10, x - 15, y - 30, x, y - 15);
    ctx.bezierCurveTo(x + 15, y - 30, x + 15, y - 10, x, y + 5);
    ctx.fill();
  }

  player.update();
  player.draw();

  ctx.restore();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
